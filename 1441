using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using Barclays.Alm.Ramebbo.Contracts.Domain;
using Barclays.Alm.Ramebbo.Contracts.Services;

namespace Barclays.Alm.Ramebbo.UnitTest.Fakes
{
    public class FakeAwsConsoleService : IAwsConsoleService
    {
        public int CallCount { get; private set; }
        public string LastGranularity { get; private set; }
        public List<string> AllGranularities { get; } = new List<string>();

        public Task<IList<IEc2>> GetEc2InstancesWithCostAsync(string granularity)
        {
            CallCount++;
            LastGranularity = granularity;
            AllGranularities.Add(granularity);

            var fake = new FakeEc2
            {
                Id = "i-1234567890",
                NodeName = "uat3.account_gateway",
                Name = "duwdsm022166458.intranet.barcapint.com",
                AmazonInstanceType = "m7i.2xlarge",
                Environment = "uat3.account_gateway",
                AppEnvironment = "BLZDEV",
                Account = "uat3",
            };

            fake.CostData.Add(new FakeEc2CostData
            {
                Cost = 0.8174,
                StartDate = "00:00",
                EndDate = "01:00"
            });

            return Task.FromResult<IList<IEc2>>(new List<IEc2> { fake });
        }

        // ======================
        // 以下方法测试不会调用
        // ======================

        public Task<IList<IEc2>> GetEc2InstancesAsync()
            => throw new NotImplementedException();

        public Task<IList<IEc2Reservation>> GetEc2ReservationsAsync()
            => throw new NotImplementedException();

        public Task<IList<IStateResult>> StopInstances(List<string> instances)
            => throw new NotImplementedException();

        public Task<IList<IStateResult>> StartInstances(List<string> instances)
            => throw new NotImplementedException();

        public Task<IList<IStateResult>> RebootInstances(List<string> instances)
            => throw new NotImplementedException();

        public Task<IStateResult> ChangeInstancesType(IRamebboEvent instancesChangeRequest)
            => throw new NotImplementedException();

        public bool IsValidInstance(string instanceName)
            => throw new NotImplementedException();
    }
}